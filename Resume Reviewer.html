<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Resume Reviewer</title>
    <!-- 1. Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. Load marked.js to render Markdown tables and formatting -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        /* Custom styles for the output */
        /* This ensures the rendered Markdown from the AI looks good */
        .ai-output h1, .ai-output h2, .ai-output h3 {
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .ai-output h1 { font-size: 1.875rem; }
        .ai-output h2 { font-size: 1.5rem; }
        .ai-output h3 { font-size: 1.25rem; }
        .ai-output p { margin-bottom: 1rem; }
        .ai-output ul { list-style-type: disc; margin-left: 1.5rem; margin-bottom: 1rem; }
        .ai-output table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            border-radius: 0.5rem;
            overflow: hidden;
        }
        .ai-output th, .ai-output td {
            border: 1px solid #e2e8f0;
            padding: 0.75rem 1rem;
            text-align: left;
        }
        .ai-output th {
            background-color: #f8fafc;
            font-weight: 600;
        }
        .ai-output tr:nth-child(even) {
            background-color: #f1f5f9;
        }
        .ai-output strong, .ai-output b {
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-slate-900 font-sans antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-100">
                AI Resume Reviewer
            </h1>
            <p class="text-slate-400 mt-2">
                Paste a Job Description and a Resume to get a detailed skill-match analysis.
            </p>
        </header>

        <main class="bg-slate-800 p-6 md:p-8 rounded-2xl shadow-lg">
            
            <!-- Input Section -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Job Description Input -->
                <div>
                    <label for="jd-input" class="block text-lg font-semibold text-slate-200 mb-2">
                        Job Description
                    </label>
                    <textarea id="jd-input"
                        class="w-full h-96 p-4 bg-slate-700 border border-slate-600 text-slate-100 placeholder-slate-400 rounded-xl shadow-sm focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-shadow resize-y"
                        placeholder="Paste the full job description here..."></textarea>
                </div>
                
                <!-- Resume Input -->
                <div>
                    <label for="resume-input" class="block text-lg font-semibold text-slate-200 mb-2">
                        Candidate's Resume
                    </label>
                    <textarea id="resume-input"
                        class="w-full h-96 p-4 bg-slate-700 border border-slate-600 text-slate-100 placeholder-slate-400 rounded-xl shadow-sm focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-shadow resize-y"
                        placeholder="Paste the full resume text here..."></textarea>
                </div>
            </div>

            <!-- Action Button -->
            <div class="text-center mt-8">
                <button id="review-button"
                    class="bg-cyan-400 text-slate-900 font-bold py-3 px-10 rounded-xl shadow-md hover:bg-cyan-300 focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-offset-2 focus:ring-offset-slate-800 transition-all transform hover:scale-105">
                    Review Resume
                </button>
            </div>

            <!-- Output Section -->
            <div id="output-container" class="mt-10">
                <!-- Loading Spinner -->
                <div id="loader" class="text-center hidden">
                    <svg class="animate-spin h-8 w-8 text-cyan-400 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="text-slate-400 mt-2">Analyzing... This may take a moment.</p>
                </div>

                <!-- AI Review Output -->
                <div id="ai-review-output" class="ai-output p-6 border border-gray-200 rounded-2xl bg-white shadow-inner hidden">
                    <!-- AI generated content will be rendered here -->
                </div>
            </div>

        </main>
    </div>

    <script>
        const jdInput = document.getElementById('jd-input');
        const resumeInput = document.getElementById('resume-input');
        const reviewButton = document.getElementById('review-button');
        const loader = document.getElementById('loader');
        const outputDiv = document.getElementById('ai-review-output');
        const outputContainer = document.getElementById('output-container');

        // Gemini API configuration
        const apiKey = ""; // API key is handled by the environment
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        /**
         * System Prompt: Instructs the AI on its role and exact output format.
         * We use the user's example as the template.
         */
        const SYSTEM_PROMPT = `You are an expert AI recruiting assistant. Your task is to analyze a provided resume against a provided job description (JD) and generate a detailed review.

CRITICAL: You MUST format your output *exactly* like the following example. Use Markdown for all formatting (tables, bold, checkmarks, etc.).

---
[START OF EXAMPLE]

Thanks ‚Äî you‚Äôve provided a strong senior-level .NET developer profile for Shilpa, and I‚Äôll evaluate her precisely against the .NET technical stack (not embedded/Bluetooth).
Below is a clean JD-style mapping and readiness summary based on the skills she presents ‚Äî this helps determine if she‚Äôs submission-ready for a Senior .NET Developer / Azure + React role (Verizon, BP, or any enterprise).

‚úÖ Candidate: Shilpa
Title: Senior .NET Developer

üìû +1 (469) 568-2025‚ÄÉüìß Sampath@unitedtekinfo.com
Experience: 9+ Years‚ÄÉLocation: Houston, TX

üéØ Core Technical Skill Fit
| Skill Area | Experience Evidence | Match |
| :--- | :--- | :--- |
| .NET Framework & Core | 9+ years in ASP.NET, .NET Core (3.0‚Äì6.0), MVC, Web API | ‚úÖ |
| C# Expertise | End-to-end full stack using C#, LINQ, Entity Framework | ‚úÖ |
| Frontend Frameworks | ReactJS (Redux, Hooks), Angular (2‚Äì16), Blazor, Bootstrap, jQuery | ‚úÖ |
| Azure Cloud | Azure App Services, Functions, Blob Storage, Cosmos DB, Azure DevOps CI/CD | ‚úÖ |
| AWS Cloud | Lambda, EC2, ECS, S3, Step Functions, CloudFormation | ‚úÖ |
| APIs / Web Services | REST, SOAP, WCF, Web API | ‚úÖ |
| Microservices & Containers | Docker, Kubernetes, Azure DevOps Pipelines | ‚úÖ |
| CI/CD & DevOps | Azure DevOps, Jenkins, GitHub Actions, Terraform automation | ‚úÖ |
* Databases | SQL Server, PostgreSQL, MongoDB, Azure SQL, Cosmos DB, Oracle | ‚úÖ |
| Reporting Tools | SSRS, Crystal Reports, Power BI | ‚úÖ |
| Testing & Quality | xUnit, NUnit, MSTest, Moq, CI test integration | ‚úÖ |
| Agile / Scrum / Jira | Active Agile experience, sprint participation, backlog grooming | ‚úÖ |
| Version Control | GitHub, TFS, Bitbucket, Azure Repos | ‚úÖ |

üß† Project Highlights
**Kinder Morgan (Houston, TX)**
* Led ASP.NET Core + React project improving system performance by 40%.
* Implemented Azure Functions, CI/CD via GitHub Actions, Terraform deployment.
* Migrated .NET monoliths to Azure App Services (PaaS).

**British Petroleum (Houston, TX)**
* Developed microservices using .NET Core + Web API + EF Core.
* AWS Lambda and Kinesis integration; GraphQL ‚Üí Cosmos DB ingestion.
* Performance optimization (40% query speedup).

**Wachter Inc. (NJ)**
* Optimized Web APIs and caching for 30% faster response times.
* Integrated AngularJS UI and SSRS/Crystal reports.

**Altice (NY)**
* Built scalable REST APIs handling 1M+ daily requests.
* AWS serverless + CI/CD integration.

**Value Momentum (India)**
* ASP.NET Core MVC applications, EF Core optimization.
* AutoCAD plugin automation (C# + Autodesk API).

‚öôÔ∏è Technical Match Summary
| Category | Weight | Match % |
| :--- | :--- | :--- |
| Backend (.NET Core, C#, Web API) | 25% | 100% |
| Cloud (Azure/AWS, CI/CD, Terraform) | 25% | 100% |
| Frontend (React/Angular/Blazor) | 20% | 100% |
| Database (SQL/NoSQL/ORM) | 15% | 100% |
| Testing & DevOps Tools | 10% | 100% |
| Agile/SDLC/Reporting Tools | 5% | 100% |
| **Total Match %** | | **100% ‚úÖ** |

üèÅ Final Verdict
| Verdict | Explanation |
| :--- | :--- |
| üü¢ Excellent Full-Stack .NET Cloud Developer (100% Fit) | Shilpa meets or exceeds all requirements for Senior .NET Core / Azure / React roles. Strong hybrid of cloud, API, and UI expertise with proven enterprise experience (Kinder Morgan, BP, Altice). |

üìå Recommendation
‚úÖ **Immediate submission-ready for:**
* Senior .NET Developer / Azure Full Stack roles (Verizon / BP / Kinder Morgan / AT&T).
* Excellent mix of .NET Core + React + Azure + DevOps.
* Strong hands-on profile (not just lead/architect).

[END OF EXAMPLE]
---

Now, analyze the following resume and JD and generate the review in that exact format.
`;

        reviewButton.addEventListener('click', handleReview);

        async function handleReview() {
            const jd = jdInput.value;
            const resume = resumeInput.value;

            if (!jd.trim() || !resume.trim()) {
                outputDiv.innerHTML = `<p class="text-red-600 font-semibold">Please paste both the Job Description and the Resume into the text boxes.</p>`;
                outputDiv.classList.remove('hidden');
                return;
            }

            // Show loader and hide old results
            loader.classList.remove('hidden');
            outputDiv.classList.add('hidden');
            outputDiv.innerHTML = '';
            
            // Construct the user prompt
            const userPrompt = `
Here is the Job Description:
---
${jd}
---

Here is the Candidate's Resume:
---
${resume}
---
`;

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: {
                    parts: [{ text: SYSTEM_PROMPT }]
                },
            };

            try {
                const response = await fetchWithBackoff(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API error: ${response.status} ${response.statusText}`);
                }

                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    const aiText = candidate.content.parts[0].text;
                    
                    // Render the Markdown response as HTML
                    outputDiv.innerHTML = marked.parse(aiText);
                    
                } else {
                    throw new Error("Invalid response structure from API.");
                }

            } catch (error) {
                console.error("Error calling Gemini API:", error);
                outputDiv.innerHTML = `<p class="text-red-600 font-semibold">An error occurred while generating the review. Please try again.</p><p class="text-gray-500 text-sm mt-2">${error.message}</p>`;
            } finally {
                // Hide loader and show results
                loader.classList.add('hidden');
                outputDiv.classList.remove('hidden');
            }
        }

        /**
         * Fetches a resource with exponential backoff.
         */
        async function fetchWithBackoff(url, options, retries = 3, delay = 1000) {
            try {
                const response = await fetch(url, options);
                if (!response.ok && response.status === 429 && retries > 0) {
                    // Throttled, wait and retry
                    await new Promise(resolve => setTimeout(resolve, delay));
                    return fetchWithBackoff(url, options, retries - 1, delay * 2);
                }
                return response;
            } catch (error) {
                if (retries > 0) {
                    // Network or other fetch error, wait and retry
                    await new Promise(resolve => setTimeout(resolve, delay));
                    return fetchWithBackoff(url, options, retries - 1, delay * 2);
                }
                throw error; // Max retries reached
            }
        }

    </script>
</body>
</html>
